<%
    var attr = params.attr;
    var rootEditPath = params.rootEditPath;
    var editPath = params.editPath || (rootEditPath + '/' + attr);
    var originalValue = params.originalValue;
%>

<tr>
    <td>
        <b><%= attr %></b>
    </td>

    <form action="<%= editPath %>" method="POST">
        <td>
            <!-- DISPLAY VALUE -->

            <% if (editField == attr) { %>
                <% if (attr == 'date') { %>
                    <%- include('../forms/date', { date: originalValue }) %>
                <% } else if (attr == 'location') { %>
                    <%- include('../forms/location', { location: originalValue }) %>
                <% } %>

            <!-- EDITABLE FIELD -->

            <% } else { %>
                <% if (attr == 'date') { %>
                    <%- include('../format/date', { params: {
                        date: originalValue,
                    }}) %>
                <% } else if (attr == 'location') { %>
                    <%- include('../format/location', { params: {
                        location: originalValue,
                    }}) %>
                <% } %>
            <% } %>
        </td>

        <td>
            <!-- SUBMIT FORM -->

            <% if (editField == attr) { %>
                <input type="hidden" value="PUT" name="_method">
                <button type="submit">save</button>

            <!-- BEGIN EDITING -->

            <% } else if (editField == 'none') { %>
                <a href="<%= editPath %>" class="link-start">edit</a>
            <% } %>
        </td>
        <td>
            <!-- CANCEL EDITING -->

            <% if (editField == attr) { %>
                <a href="<%= rootEditPath %>">cancel</a>
            <% } %>
        </td>
    </form>
</tr>
