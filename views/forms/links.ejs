<%
    var links = params.links;
    var rootPath = params.rootPath;
    var editIsActive = params.editIsActive;
    var editIsAvailable = params.editIsAvailable;

    var addLinkPath = rootPath + '/add/links';
    var deleteLinkPath = rootPath + '/delete/links';
    var reorderLinkPath = rootPath + '/reorder/links';

    var numberOfLinks = links.length;
    var extraRows = 0;

    if (editIsAvailable || editIsActive) {
        extraRows += 1;
    }

    // editType options: hidden, available, active
%>

<% for (var i = 0; i < numberOfLinks + extraRows; i++) { %>
    <tr>
        <td>
            <% if (i == 0) { %>
                <b>links</b>
            <% } %>
        </td>
        <% if (i < numberOfLinks) { %>
            <td>
                <%- include('../format/externalLink', { url: links[i] }) %>
            </td>
            <% if (editIsAvailable) { %>
                <td>
                    <form action="<%= deleteLinkPath %>/<%= i %>" method="POST"
                            onsubmit="return confirmDeletion('link')">
                        <input type="hidden" value="PUT" name="_method">
                        <button type="submit">delete</button>
                    </form>
                </td>
                <td>
                    <% if (i > 0) { %>
                        <form action="<%= reorderLinkPath %>/<%= i %>" method="POST">
                            <input type="hidden" value="PUT" name="_method">
                            <button type="submit">reorder up</button>
                        </form>
                    <% } %>
                </td>
            <% } else { %>
                <td></td>
            <% } %>
        <% } else { %>
            <form action="<%= addLinkPath %>" method="POST">
                <td>
                    <% if (editIsAvailable) { %>
                        <a href="<%= addLinkPath %>">add</a>
                    <% } else if (editIsActive) { %>
                        <input type="text" value="" name="links">
                    <% } %>
                </td>
                <td>
                    <% if (editIsActive) { %>
                        <input type="hidden" value="PUT" name="_method">
                        <button type="submit">save</button>
                        <a href="<%= rootPath %>/edit">cancel</a>
                    <% } %>
                </td>
                <% if (editIsAvailable) { %>
                    <td></td>
                <% } %>
            </form>
        <% } %>
    </tr>
<% } %>
