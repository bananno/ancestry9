<%- include ../partials/header %>

<%
    var rootPath = "/person/" + (person.customId || person._id);
    var rootEditPath = rootPath + "/edit"
%>

<div id="page-content">
    <%- include('../people/personHeader', { params: {
        person: person,
        edit: true,
    }}) %>

    <table class="edit-form-frame">

        <!-- NAME -->

        <%- include('../forms/tableRowSingle', { params: {
            attr: 'name',
            editPath: rootEditPath + '/name',
            originalValue: person.name,
        }}) %>

        <!-- ID -->

        <%- include('../forms/tableRowSingle', { params: {
            attr: 'customId',
            attrName: 'id',
            editPath: rootEditPath + '/id',
            originalValue: person.customId,
        }}) %>

        <!-- PARENTS -->

        <%- include('../forms/tableRowMulti', { params: {
            attr: 'parents',
            rootPath: rootPath,
            values: person.parents,
            dataType: 'people',
        }}) %>

        <!-- SPOUSES -->

        <%- include('../forms/tableRowMulti', { params: {
            attr: 'spouses',
            rootPath: rootPath,
            values: person.spouses,
            dataType: 'people',
        }}) %>

        <!-- CHILDREN -->

        <%- include('../forms/tableRowMulti', { params: {
            attr: 'children',
            rootPath: rootPath,
            values: person.children,
            dataType: 'people',
        }}) %>

        <!-- LINKS -->

        <%- include('../forms/links', { params: {
            links: person.links,
            rootPath: rootPath,
            editIsActive: editView == 'links',
            editIsAvailable: editView == 'none',
        }}) %>

    </table>

</div>

<script>
  initializeEditForm('<%= editView %>' != 'none');
</script>
