<style>
    td {
        padding: 5px;
    }
</style>

<%- include ../partials/header %>

<%
    var previousRelationship = '';
%>

<div id="page-content">
    <%- include('../people/personHeader', { params: {
        person: person,
    }}) %>

    <div class="filter-buttons relative-list">
        <div class="filter-button active" relative-type="ancestor">
            ancestors
        </div>
        <div class="filter-button active" relative-type="descendent">
            descendents
        </div>
        <div class="filter-button active" relative-type="blood">
            blood relatives
        </div>
        <div class="filter-button active" relative-type="marriage">
            marriage relatives
        </div>
        <div class="filter-button active" relative-type="none">
            no relationship
        </div>
    </div>

    <table class="info-table relative-list">
        <tr>
            <th> relationship </th>
            <th> person </th>
            <th> generation </th>
            <th> distance </th>
        </tr>

        <% relativeList.forEach(obj => { %>
            <%
                var thisRelationship = '';

                if (obj.relationship != previousRelationship) {
                    thisRelationship = obj.relationship;
                    previousRelationship = obj.relationship;
                }

            %>
            <tr class="person-row" relative-type="<%= obj.type %>">
                <td>
                    <%= thisRelationship %>
                </td>
                <td>
                    <%- include('../partials/linkToPerson', {person: obj.person}) %>
                </td>
                <td>
                    <%= obj.generation %>
                </td>
                <td>
                    <%= obj.distance %>
                </td>
            </tr>
        <% }); %>
    </table>
</div>

<script>
  filterRelativeList();
</script>
